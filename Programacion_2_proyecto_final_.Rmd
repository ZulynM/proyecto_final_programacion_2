---
title: "Programacion_2_proyecto_final"
author: "Zulyn_Mendez_O, Kimberly Matarrita, Joseline Portuguez"
date: "2023-08-24"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(stringr)
library(readr)
library(readxl) 
library(writexl) 
library(utils)
library(RSQLite) 
library(DBI)
library(lubridate)
library(ggplot2)
library(gt)
library(leaflet)
```

A.Realiza la lectura de los datos en R
```{r}
datos_terremotos_1<-"https://raw.githubusercontent.com/isa229/programacion_analisis_datos_ii/main/terremotos_profundidad.csv"
```


```{r}
terremotos_1 <- read_csv(datos_terremotos_1)
```

```{r}
datos_terremotos_2<-"https://raw.githubusercontent.com/isa229/programacion_analisis_datos_ii/main/terremotos_magnitud.csv"
```

```{r}
terremotos_2 <- read_csv(datos_terremotos_2)
```

B.• 2.2 Limpiar nombre de las variables (traducir al español) (4pts)

```{r}
colnames(terremotos_1) <- c("Código", "Fecha", "Tiempo", "Latitud", "Longitud", "Tipo", "Profundidad", "Error de Profundidad", "ID")

```


```{r}
colnames(terremotos_2) <- c("Código", "ID","Magnitud", "Tipo de Magnitud")
```

2.3 Eliminación de filas duplicadas (si existen)

```{r}
datos_terremotos_profundidad <- distinct(terremotos_1)
```


```{r}
datos_terremotos_magnitud <- distinct(terremotos_2)
```


2.4 Transformación de los tipos de variables: para el conjunto de datos terremotos_profundidad use
lubridate para transformar la fecha de carácter a un objetivo tipo fecha (2pts)

```{r}
filas_separadas <- c(20651, 7565, 3540)

for (fila in filas_separadas) {
  fecha_hora <- datos_terremotos_profundidad$Fecha[datos_terremotos_profundidad$Nfila == fila]
  
  Fecha <- as.Date(substr(fecha_hora, 1, 10), format = "%m/%d/%Y")
  Hora <- substr(fecha_hora, 12, 23)
  
  datos_terremotos_profundidad$Fecha[datos_terremotos_profundidad$Nfila == fila] <- Fecha
  datos_terremotos_profundidad$Hora[datos_terremotos_profundidad$Nfila == fila] <- Hora
}
```


```{r}
head(datos_terremotos_profundidad)
```

2.5 Transformación de datos: para el conjunto de datos terremotos_profundidad examine cuáles son los valores distintos que hay en la variable "Type" o tipo. Use mutate para unificar valores si es necesario 

```{r}
valores_distintos_tipo <- as.data.frame(table(datos_terremotos_profundidad$Tipo))
```

```{r}
datos_terremotos_profundidad <- datos_terremotos_profundidad |>
  mutate(across(c(Tipo), function(x) ifelse(x == "earthquake", "Terremoto", x))) |>
  mutate(across(c(Tipo), function(x) ifelse(x == "Earthquake", "Terremoto", x))) |>
  mutate(across(c(Tipo), function(x) ifelse(x == "nuclear explosion", "Explosión Nuclear", x))) |> 
  mutate(across(c(Tipo), function(x) ifelse(x == "Nuclear Explosion", "Explosión Nuclear", x))) |>
  mutate(across(c(Tipo), function(x) ifelse(x == "Explosion", "Explosión", x))) |>
  mutate(across(c(Tipo), function(x) ifelse(x == "Rock Burst", "Estallido de Roca", x)))
```


```{r}
unique(datos_terremotos_profundidad$Tipo) 
```

